<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.anylogic.ssystem.bms.com.mapper.BmsComFaqMapper">

    <resultMap id="selectFaqListMap" type="com.anylogic.ssystem.bms.com.model.SelectFaqListResVO">
        <id column="faqid" property="faqid" />                        <!-- FAQ아이디 -->
        <result column="title" property="title" />                    <!-- 제목 -->
        <result column="cont" property="cont" />                      <!-- 내용 -->
        <result column="sdate" property="sdate" />                    <!-- 게시시작일 -->
        <result column="edate" property="edate" />                    <!-- 게시종료일 -->
        <result column="deptid" property="deptid" />                  <!-- 부서아이디 -->
        <result column="deptname" property="deptname" />              <!-- 부서명 -->
        <result column="selcnt" property="selcnt" />                  <!-- 조회수 -->
        <result column="repcnt" property="repcnt" />                  <!-- 확인여부 -->
        <result column="inid" property="inid" />                      <!-- 등록자아이디 -->
        <result column="inname" property="inname" />                  <!-- 등록자명 -->
        <result column="indt" property="indt" />                      <!-- 등록일시 -->
        <result column="upid" property="upid" />                      <!-- 수정자아이디 -->
        <result column="upname" property="upname" />                  <!-- 수정자명 -->
        <result column="updt" property="updt" />                      <!-- 수정일시 -->
        <result column="fileyn" property="fileyn" />                  <!-- 첨부파일여부 -->
        <result column="cnfmyn" property="cnfmyn" />                  <!-- 미사용 -->
        <result column="rmk" property="rmk" />                        <!-- 미사용 -->
    </resultMap>

    <resultMap id="getFaqDetailMap" type="com.anylogic.ssystem.bms.com.model.GetFaqDetailResVO">
        <id column="faqid" property="faqid" />                        <!-- FAQ아이디 -->
        <result column="title" property="title" />                    <!-- 제목 -->
        <result column="cont" property="cont" />                      <!-- 내용 -->
        <result column="sdate" property="sdate" />                    <!-- 게시시작일 -->
        <result column="edate" property="edate" />                    <!-- 게시종료일 -->
        <result column="deptid" property="deptid" />                  <!-- 부서아이디 -->
        <result column="deptname" property="deptname" />              <!-- 부서명 -->
        <result column="selcnt" property="selcnt" />                  <!-- 조회수 -->
        <result column="repcnt" property="repcnt" />                  <!-- 확인여부 -->
        <result column="inid" property="inid" />                      <!-- 등록자아이디 -->
        <result column="inname" property="inname" />                  <!-- 등록자명 -->
        <result column="indt" property="indt" />                      <!-- 등록일시 -->
        <result column="upid" property="upid" />                      <!-- 수정자아이디 -->
        <result column="upname" property="upname" />                  <!-- 수정자명 -->
        <result column="updt" property="updt" />                      <!-- 수정일시 -->
        <result column="fileyn" property="fileyn" />                  <!-- 첨부파일여부 -->
        <result column="cnfmyn" property="cnfmyn" />                  <!-- 미사용 -->
        <result column="rmk" property="rmk" />                        <!-- 미사용 -->
    </resultMap>

    <!-- 게시판관리 > FAQ 관리 > FAQ 목록 조회 -->
    <select id="selectFaqList" parameterType="com.anylogic.ssystem.bms.com.model.SelectFaqListReqVO" resultMap="selectFaqListMap">
        SELECT
            faqid as "faqid"
            , title as "title"
            , cont as "cont"
            , sdate as "sdate"
            , edate as "edate"
            , deptid as "deptid"
            , deptname as "deptname"
            , selcnt as "selcnt"
            , repcnt as "repcnt"
            , inid as "inid"
            , inname as "inname"
            , indt as "indt"
            , upid as "upid"
            , upname as "upname"
            , updt as "updt"
            , fileyn as "fileyn"
            , cnfmyn as "cnfmyn"
            , rmk as "rmk"
        FROM  sbms.sbms_user.bms_com_faq
        WHERE 1 = 1
            <if test="title != null and title !=''">
                and title like CONCAT('%', #{title}, '%')
            </if>
            <if test="inname != null and inname !=''">
                and inname like CONCAT('%', #{inname}, '%')
            </if>
            <if test="startDt != null and startDt !=''">
                and indt <![CDATA[>=]]> #{startDt}
            </if>
            <if test="endDt != null and endDt !=''">
                and indt <![CDATA[<=]]> #{endDt}
            </if>
        ORDER BY indt DESC
    </select>

    <!-- 게시판관리 > FAQ 관리 > FAQ 삭제 -->
    <delete id="deleteFaqBIA" parameterType="com.anylogic.ssystem.bms.com.model.DeleteFaqBIAReqVO">
        DELETE FROM sbms.sbms_user.bms_com_faq
        WHERE 1 = 1
            and faqid = #{faqid}
    </delete>

    <!-- 게시판관리 > FAQ 관리 > FAQ 상세 조회 -->
    <select id="getFaqDetail" parameterType="com.anylogic.ssystem.bms.com.model.GetFaqDetailReqVO" resultMap="getFaqDetailMap">
        SELECT
            faqid as "faqid"
            , title as "title"
            , cont as "cont"
            , sdate as "sdate"
            , edate as "edate"
            , deptid as "deptid"
            , deptname as "deptname"
            , selcnt as "selcnt"
            , repcnt as "repcnt"
            , inid as "inid"
            , inname as "inname"
            , indt as "indt"
            , upid as "upid"
            , upname as "upname"
            , updt as "updt"
            , fileyn as "fileyn"
            , cnfmyn as "cnfmyn"
            , rmk as "rmk"
        FROM  sbms.sbms_user.bms_com_faq
        WHERE 1 = 1
            <if test="faqid != null and faqid !=''">
                and faqid like CONCAT('%', #{faqid}, '%')
            </if>

    </select>

    <!-- 게시판관리 > FAQ 관리 > FAQ 조회수 증가 -->
    <update id="addSelCnt" parameterType="com.anylogic.ssystem.bms.com.model.UpdateFaqBIAReqVO">
        UPDATE sbms.sbms_user.bms_com_faq
        <trim prefix="SET" suffixOverrides=",">
            <if test="selcnt != null and selcnt !=''">
                selcnt = #{selcnt},
            </if>
        </trim>
        WHERE 1 = 1
            and faqid = #{faqid}
    </update>

    <!-- 게시판관리 > FAQ 관리 > FAQ 등록 -->
    <insert id="insertFaqBIA" parameterType="com.anylogic.ssystem.bms.com.model.InsertFaqBIAReqVO">
        INSERT INTO
        sbms.sbms_user.bms_com_faq(
            <trim suffixOverrides=",">
            <if test="faqid != null and faqid !=''">
                faqid,
            </if>
            <if test="title != null and title !=''">
                title,
            </if>
            <if test="cont != null and cont !=''">
                cont,
            </if>
            <if test="inid != null and inid !=''">
                inid,
            </if>
            <if test="inname != null and inname !=''">
                inname,
            </if>
            <if test="indt != null and indt !=''">
                indt,
            </if>
            </trim>
        )
        VALUES(
            <trim suffixOverrides=",">
            <if test="faqid != null and faqid !=''">
                #{faqid},
            </if>
            <if test="title != null and title !=''">
                #{title},
            </if>
            <if test="cont != null and cont !=''">
                #{cont},
            </if>
            <if test="inid != null and inid !=''">
                #{inid},
            </if>
            <if test="inname != null and inname !=''">
                #{inname},
            </if>
            <if test="indt != null and indt !=''">
                #{indt},
            </if>
            </trim>
        )
    </insert>

    <!--  게시판관리 > FAQ 관리 > FAQ 수정 -->
    <update id="updateFaqBIA" parameterType="com.anylogic.ssystem.bms.com.model.UpdateFaqBIAReqVO">
        UPDATE sbms.sbms_user.bms_com_faq
        <trim prefix="SET" suffixOverrides=",">
            <if test="title != null and title !=''">
                title = #{title},
            </if>
            <if test="cont != null and cont !=''">
                cont = #{cont},
            </if>
            <if test="inid != null and inid !=''">
                inid = #{inid},
            </if>
            <if test="inname != null and inname !=''">
                inname = #{inname},
            </if>
            <if test="indt != null and indt !=''">
                indt = #{indt},
            </if>
            <if test="upid != null and upid !=''">
                upid = #{upid},
            </if>
            <if test="upname != null and upname !=''">
                upname = #{upname},
            </if>
            <if test="updt != null and updt !=''">
                updt = #{updt},
            </if>
        </trim>
        WHERE 1 = 1
            and faqid = #{faqid}
    </update>

</mapper>

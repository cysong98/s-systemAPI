<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.anylogic.ssystem.bms.com.mapper.ComJobgubunMapper">

    <resultMap id="selectJobgubunListMap" type="com.anylogic.ssystem.bms.com.model.SelectJobgubunListResVO">
        <id column="jobgubun" property="jobgubun" />                  <!-- 직류코드 -->
        <id column="code" property="code" />                          <!-- 직위코드 -->
        <result column="codename" property="codename" />              <!-- 직위명 -->
        <result column="inid" property="inid" />                      <!-- 등록자아이디 -->
        <result column="indt" property="indt" />                      <!-- 등록일시 -->
        <result column="upid" property="upid" />                      <!-- 수정자아이디 -->
        <result column="updt" property="updt" />                      <!-- 수정일시 -->
    </resultMap>

    <resultMap id="getJobgubunDetailMap" type="com.anylogic.ssystem.bms.com.model.GetJobgubunDetailResVO">
        <id column="jobgubun" property="jobgubun" />                  <!-- 직류코드 -->
        <id column="code" property="code" />                          <!-- 직위코드 -->
        <result column="codename" property="codename" />              <!-- 직위명 -->
        <result column="inid" property="inid" />                      <!-- 등록자아이디 -->
        <result column="indt" property="indt" />                      <!-- 등록일시 -->
        <result column="upid" property="upid" />                      <!-- 수정자아이디 -->
        <result column="updt" property="updt" />                      <!-- 수정일시 -->
    </resultMap>


    <!-- 조직관리 > 직위/직급관리 > 직위관리 목록 조회 -->
    <select id="selectJobgubunList" parameterType="com.anylogic.ssystem.bms.com.model.SelectJobgubunListReqVO" resultMap="selectJobgubunListMap">
        SELECT
            jobgubun as "jobgubun"
            , code as "code"
            , codename as "codename"
            , inid as "inid"
            , indt as "indt"
            , upid as "upid"
            , updt as "updt"
        FROM  sbms.sbms_user.com_jobgubun
        WHERE 1 = 1
            <if test="code != null and code !=''">
                and code like CONCAT('%', #{code}, '%')
            </if>
            <if test="codename != null and codename !=''">
                and codename like CONCAT('%', #{codename}, '%')
            </if>
            <if test="startDt != null and startDt !=''">
                and indt <![CDATA[>=]]> #{startDt}
            </if>
            <if test="endDt != null and endDt !=''">
                and indt <![CDATA[<=]]> #{endDt}
            </if>
        ORDER BY indt DESC
    </select>

    <!-- 조직관리 > 직위/직급관리 > 직위 삭제 -->
    <delete id="deleteJobgubun" parameterType="com.anylogic.ssystem.bms.com.model.DeleteJobgubunReqVO">
        DELETE FROM sbms.sbms_user.com_jobgubun
        WHERE 1 = 1
            and jobgubun = #{jobgubun}
            and code = #{code}
    </delete>

    <!-- 조직관리 > 직위/직급관리 > 직위 상세 조회 -->
    <select id="getJobgubunDetail" parameterType="com.anylogic.ssystem.bms.com.model.GetJobgubunDetailReqVO" resultMap="getJobgubunDetailMap">
        SELECT
            jobgubun as "jobgubun"
            , code as "code"
            , codename as "codename"
            , inid as "inid"
            , indt as "indt"
            , upid as "upid"
            , updt as "updt"
        FROM  sbms.sbms_user.com_jobgubun
        WHERE 1 = 1
            and jobgubun = #{jobgubun}
            and code = #{code}
    </select>

    <!-- 조직관리 > 직위/직급관리 > 직위 등록 -->
    <insert id="insertJobgubun" parameterType="com.anylogic.ssystem.bms.com.model.InsertJobgubunReqVO">
        INSERT INTO
        sbms.sbms_user.com_jobgubun(
        <trim suffixOverrides=",">
            <if test="jobgubun != null and jobgubun !=''">
                jobgubun,
            </if>
            <if test="code != null and code !=''">
                code,
            </if>
            <if test="codename != null and codename !=''">
                codename,
            </if>
            <if test="inid != null and inid !=''">
                inid,
            </if>
            <if test="indt != null and indt !=''">
                indt,
            </if>
            <if test="upid != null and upid !=''">
                upid,
            </if>
            <if test="updt != null and updt !=''">
                updt,
            </if>
        </trim>
        )
        VALUES(
        <trim suffixOverrides=",">
            <if test="jobgubun != null and jobgubun !=''">
                #{jobgubun},
            </if>
            <if test="code != null and code !=''">
                #{code},
            </if>
            <if test="codename != null and codename !=''">
                #{codename},
            </if>
            <if test="inid != null and inid !=''">
                #{inid},
            </if>
            <if test="indt != null and indt !=''">
                #{indt},
            </if>
            <if test="upid != null and upid !=''">
                #{upid},
            </if>
            <if test="updt != null and updt !=''">
                #{updt},
            </if>
        </trim>
        )
    </insert>

    <!-- 조직관리 > 직위/직급관리 > 직위 수정 -->
    <update id="updateJobgubun" parameterType="com.anylogic.ssystem.bms.com.model.UpdateJobgubunReqVO">
        UPDATE sbms.sbms_user.com_jobgubun
        <trim prefix="SET" suffixOverrides=",">
            <if test="codename != null and codename !=''">
                codename = #{codename},
            </if>
            <if test="inid != null and inid !=''">
                inid = #{inid},
            </if>
            <if test="indt != null and indt !=''">
                indt = #{indt},
            </if>
            <if test="upid != null and upid !=''">
                upid = #{upid},
            </if>
            <if test="updt != null and updt !=''">
                updt = #{updt},
            </if>
        </trim>
        WHERE 1 = 1
            and jobgubun = #{jobgubun}
            and code = #{code}
    </update>

</mapper>
